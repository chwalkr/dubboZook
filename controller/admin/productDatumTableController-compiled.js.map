{"version":3,"sources":["productDatumTableController.js"],"names":[],"mappings":"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","file":"productDatumTableController-compiled.js","sourcesContent":["var visaProductDatumTableService = require('../../remote/restRemote').visaProductDatumTableService;\r\nvar userService = require('../../service/userService');\r\n\r\nmodule.exports = function (app) {\r\n    app.get('/visa/v2/product/datum/tpl/search', function (req, res, next) {\r\n        console.log('=========product datum tpl search : ', req.query);\r\n        var name = req.query.name||'';\r\n        visaProductDatumTableService.excute('searchVisaDatumTplByName',{name:name}, function(err, crs){\r\n            if(err) res.json({rs:0,msg:err}).end();\r\n            console.log('========================product datum tpl result:', crs);\r\n            res.send(crs).end();\r\n        });\r\n    });\r\n\r\n    app.post('/visa/v2/product/datum/tpl/save', function (req, res, next) {\r\n        console.log('=========save product datum tpl', req.body);\r\n        userService.queryUserInfo(req).then(function (userCrs) {\r\n            var uname = userCrs.data.trueName||userCrs.data.loginName;\r\n            req.body.modifier = uname;\r\n            req.body.creator = uname;\r\n            visaProductDatumTableService.excute('saveVisaDatumTpl',req.body, function(err, crs){\r\n                if(err) res.json({rs:0,msg:err}).end();\r\n                res.send(crs).end()||'';\r\n            });\r\n        }).catch(function (crs) {\r\n            res.json(crs);\r\n        });\r\n    });\r\n\r\n    app.get('/visa/v2/product/datum/tpl/del/:id', function (req, res, next) {\r\n        console.log('=========del product datum tpl id : ', req.params.id);\r\n        userService.queryUserInfo(req).then(function (userCrs) {\r\n            var uname = userCrs.data.trueName||userCrs.data.loginName;\r\n            visaProductDatumTableService.excute('delVisaDatumTpl',{id:req.params.id, operator:uname}, function(err, crs){\r\n                if(err) res.json({rs:0,msg:err}).end();\r\n                res.send(crs).end();\r\n            });\r\n        }).catch(function (crs) {\r\n            res.json(crs);\r\n        });\r\n    });\r\n\r\n\r\n    app.get('/visa/v2/product/datum/list/:visaCode', function (req, res, next) {\r\n        console.log('=========query datums of product visaCode: ', req.params.visaCode);\r\n        visaProductDatumTableService.excute('queryVisaDatums',{visaCode:req.params.visaCode}, function(err, crs){\r\n            if(err) res.json({rs:0,msg:err}).end();\r\n            res.send(crs).end();\r\n        });\r\n    });\r\n\r\n\r\n    app.get('/visa/v2/product/datum/save', function (req, res, next) {\r\n        console.log('=========save datums of product', req.body);\r\n        visaProductDatumTableService.excute('saveVisaDatums',req.body, function(err, crs){\r\n            if(err) res.json({rs:0,msg:err}).end();\r\n            res.send(crs).end();\r\n        });\r\n    });\r\n\r\n    app.get('/visa/v2/table/attach/:visaCode/:tableTplId', function (req, res, next) {\r\n        console.log('=========attach visa table of product ', req.params);\r\n        visaProductDatumTableService.excute('attachVisaTable',{visaCode:req.params.visaCode,tableTplId:req.params.tableTplId}, function(err, crs){\r\n            if(err) res.json({rs:0,msg:err}).end();\r\n            res.send(crs).end();\r\n        });\r\n    });\r\n\r\n    app.get('/visa/v2/table/detach/:visaCode', function (req, res, next) {\r\n        console.log('=========detach visa table of product ', req.params);\r\n        visaProductDatumTableService.excute('detachVisaTable',{visaCode:req.params.visaCode}, function(err, crs){\r\n            if(err) res.json({rs:0,msg:err}).end();\r\n            res.send(crs).end();\r\n        });\r\n    });\r\n};"]}