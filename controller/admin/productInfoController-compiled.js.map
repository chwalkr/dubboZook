{"version":3,"sources":["productInfoController.js"],"names":[],"mappings":";;AAAA,IAAI,yBAAyB,QAAQ,yBAAR,EAAmC,sBAAhE;AACA,IAAI,cAAc,QAAQ,2BAAR,CAAlB;;AAEA,OAAO,OAAP,GAAiB,UAAU,GAAV,EAAe;AAC5B,QAAI,IAAJ,CAAS,yBAAT,EAAoC,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AAC1D,gBAAQ,GAAR,CAAY,iCAAZ,EAA+C,IAAI,IAAnD;AACA,+BAAuB,MAAvB,CAA8B,wBAA9B,EAAuD;AACnD,oBAAO,IAAI,IAAJ,CAAS,MAAT,IAAiB,CAD2B;AAEnD,sBAAS,IAAI,IAAJ,CAAS,QAAT,IAAmB,EAFuB;AAGnD,kBAAK,IAAI,IAAJ,CAAS,IAAT,IAAe,EAH+B;AAInD,sBAAS,IAAI,IAAJ,CAAS,QAAT,IAAmB,EAJuB;AAKnD,qBAAQ,IAAI,IAAJ,CAAS,OAAT,IAAkB,IALyB;AAMnD,mBAAM,IAAI,IAAJ,CAAS,KAAT,IAAgB;AAN6B,SAAvD,EAOG,UAAS,GAAT,EAAc,GAAd,EAAkB;AACjB,gBAAG,GAAH,EAAQ,IAAI,IAAJ,CAAS,EAAC,IAAG,CAAJ,EAAM,KAAI,GAAV,EAAT,EAAyB,GAAzB;AACR,gBAAI,IAAJ,CAAS,GAAT,EAAc,GAAd,MAAqB,EAArB;AACH,SAVD;AAWH,KAbD;;AAeA,QAAI,GAAJ,CAAQ,6BAAR,EAAuC,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AAC7D,gBAAQ,GAAR,CAAY,+BAAZ,EAA6C,IAAI,MAAJ,CAAW,EAAxD;AACA,+BAAuB,MAAvB,CAA8B,kBAA9B,EAAiD;AAC7C,gBAAG,IAAI,MAAJ,CAAW,EAAX,IAAe;AAD2B,SAAjD,EAEG,UAAS,GAAT,EAAc,GAAd,EAAkB;AACjB,gBAAG,GAAH,EAAQ,IAAI,IAAJ,CAAS,EAAC,IAAG,CAAJ,EAAM,KAAI,GAAV,EAAT,EAAyB,GAAzB;AACR,gBAAI,IAAJ,CAAS,GAAT,EAAc,GAAd,MAAqB,EAArB;AACH,SALD;AAMH,KARD;;AAUA,QAAI,IAAJ,CAAS,sBAAT,EAAiC,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AACvD,gBAAQ,GAAR,CAAY,8BAAZ,EAA4C,IAAI,IAAhD;AACA,oBAAY,aAAZ,CAA0B,GAA1B,EAA+B,IAA/B,CAAoC,UAAU,OAAV,EAAmB;AACnD,gBAAI,QAAQ,QAAQ,IAAR,CAAa,QAAb,IAAuB,QAAQ,IAAR,CAAa,SAAhD;AACA,gBAAI,IAAJ,CAAS,OAAT,GAAmB,KAAnB;AACA,mCAAuB,MAAvB,CAA8B,YAA9B,EAA2C,IAAI,IAA/C,EAAqD,UAAS,GAAT,EAAc,GAAd,EAAkB;AACnE,oBAAG,GAAH,EAAQ,IAAI,IAAJ,CAAS,EAAC,IAAG,CAAJ,EAAM,KAAI,GAAV,EAAT,EAAyB,GAAzB;AACR,oBAAI,IAAJ,CAAS,GAAT,EAAc,GAAd,MAAqB,EAArB;AACH,aAHD;AAIH,SAPD,EAOG,KAPH,CAOS,UAAU,GAAV,EAAe;AACpB,gBAAI,IAAJ,CAAS,GAAT;AACH,SATD;AAUH,KAZD;;AAcA,QAAI,IAAJ,CAAS,yBAAT,EAAoC,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AAC1D,gBAAQ,GAAR,CAAY,iCAAZ,EAA+C,IAAI,IAAnD;AACA,oBAAY,aAAZ,CAA0B,GAA1B,EAA+B,IAA/B,CAAoC,UAAU,OAAV,EAAmB;AACnD,gBAAI,QAAQ,QAAQ,IAAR,CAAa,QAAb,IAAuB,QAAQ,IAAR,CAAa,SAAhD;AACA,gBAAI,IAAJ,CAAS,QAAT,GAAoB,KAApB;AACA,mCAAuB,MAAvB,CAA8B,mBAA9B,EAAkD,IAAI,IAAtD,EAA4D,UAAS,GAAT,EAAc,GAAd,EAAkB;AAC1E,oBAAG,GAAH,EAAQ,IAAI,IAAJ,CAAS,EAAC,IAAG,CAAJ,EAAM,KAAI,GAAV,EAAT,EAAyB,GAAzB;AACR,oBAAI,IAAJ,CAAS,GAAT,EAAc,GAAd,MAAqB,EAArB;AACH,aAHD;AAIH,SAPD,EAOG,KAPH,CAOS,UAAU,GAAV,EAAe;AACpB,gBAAI,IAAJ,CAAS,GAAT;AACH,SATD;AAUH,KAZD;;AAcA,QAAI,GAAJ,CAAQ,mCAAR,EAA6C,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AACnE,gBAAQ,GAAR,CAAY,uCAAZ,EAAqD,IAAI,IAAzD;AACA,oBAAY,aAAZ,CAA0B,GAA1B,EAA+B,IAA/B,CAAoC,UAAU,OAAV,EAAmB;AACnD,gBAAI,QAAQ,QAAQ,IAAR,CAAa,QAAb,IAAuB,QAAQ,IAAR,CAAa,SAAhD;AACA,mCAAuB,MAAvB,CAA8B,oBAA9B,EAAmD,EAAC,IAAG,IAAI,MAAJ,CAAW,EAAX,IAAe,CAAnB,EAAsB,OAAM,IAAI,KAAJ,CAAU,KAAtC,EAA6C,UAAS,KAAtD,EAAnD,EAAiH,UAAS,GAAT,EAAc,GAAd,EAAkB;AAC/H,oBAAG,GAAH,EAAQ,IAAI,IAAJ,CAAS,EAAC,IAAG,CAAJ,EAAM,KAAI,GAAV,EAAT,EAAyB,GAAzB;AACR,oBAAI,IAAJ,CAAS,GAAT,EAAc,GAAd,MAAqB,EAArB;AACH,aAHD;AAIH,SAND,EAMG,KANH,CAMS,UAAU,GAAV,EAAe;AACpB,gBAAI,IAAJ,CAAS,GAAT;AACH,SARD;AASH,KAXD;;AAaA,QAAI,GAAJ,CAAQ,0BAAR,EAAoC,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AAC1D,gBAAQ,GAAR,CAAY,+BAAZ,EAA6C,IAAI,MAAJ,CAAW,EAAxD;AACA,oBAAY,aAAZ,CAA0B,GAA1B,EAA+B,IAA/B,CAAoC,UAAU,OAAV,EAAmB;AACnD,gBAAI,QAAQ,QAAQ,IAAR,CAAa,QAAb,IAAuB,QAAQ,IAAR,CAAa,SAAhD;AACA,mCAAuB,MAAvB,CAA8B,YAA9B,EAA2C;AACvC,oBAAG,IAAI,MAAJ,CAAW,EAAX,IAAe,CADqB;AAEvC,0BAAS;AAF8B,aAA3C,EAGG,UAAS,GAAT,EAAc,GAAd,EAAkB;AACjB,oBAAG,GAAH,EAAQ,IAAI,IAAJ,CAAS,EAAC,IAAG,CAAJ,EAAM,KAAI,GAAV,EAAT,EAAyB,GAAzB;AACR,oBAAI,IAAJ,CAAS,GAAT,EAAc,GAAd,MAAqB,EAArB;AACH,aAND;AAOH,SATD,EASG,KATH,CASS,UAAU,GAAV,EAAe;AACpB,gBAAI,IAAJ,CAAS,GAAT;AACH,SAXD;AAYH,KAdD;;AAiBA,QAAI,GAAJ,CAAQ,mCAAR,EAA6C,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AACnE,gBAAQ,GAAR,CAAY,qCAAZ,EAAmD,IAAI,MAAJ,CAAW,EAA9D;AACA,oBAAY,aAAZ,CAA0B,GAA1B,EAA+B,IAA/B,CAAoC,UAAU,OAAV,EAAmB;AACnD,gBAAI,QAAQ,QAAQ,IAAR,CAAa,QAAb,IAAuB,QAAQ,IAAR,CAAa,SAAhD;AACA,mCAAuB,MAAvB,CAA8B,oBAA9B,EAAmD;AAC/C,oBAAG,IAAI,MAAJ,CAAW,EAAX,IAAe,CAD6B;AAE/C,uBAAM,IAAI,KAAJ,CAAU,KAF+B;AAG/C,0BAAS;AAHsC,aAAnD,EAIG,UAAS,GAAT,EAAc,GAAd,EAAkB;AACjB,oBAAG,GAAH,EAAQ,IAAI,IAAJ,CAAS,EAAC,IAAG,CAAJ,EAAM,KAAI,GAAV,EAAT,EAAyB,GAAzB;AACR,oBAAI,IAAJ,CAAS,GAAT,EAAc,GAAd,MAAqB,EAArB;AACH,aAPD;AAQH,SAVD,EAUG,KAVH,CAUS,UAAU,GAAV,EAAe;AACpB,gBAAI,IAAJ,CAAS,GAAT;AACH,SAZD;AAaH,KAfD;;AAiBA,QAAI,GAAJ,CAAQ,qCAAR,EAA+C,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AACrE,gBAAQ,GAAR,CAAY,4CAAZ,EAA0D,IAAI,MAAJ,CAAW,EAArE;AACA,oBAAY,aAAZ,CAA0B,GAA1B,EAA+B,IAA/B,CAAoC,UAAU,OAAV,EAAmB;AACnD,gBAAI,QAAQ,QAAQ,IAAR,CAAa,QAAb,IAAuB,QAAQ,IAAR,CAAa,SAAhD;AACA,mCAAuB,MAAvB,CAA8B,0BAA9B,EAAyD;AACrD,oBAAG,IAAI,MAAJ,CAAW,EAAX,IAAe,CADmC;AAErD,8BAAa,IAAI,KAAJ,CAAU,YAF8B;AAGrD,0BAAS;AAH4C,aAAzD,EAIG,UAAS,GAAT,EAAc,GAAd,EAAkB;AACjB,oBAAG,GAAH,EAAQ,IAAI,IAAJ,CAAS,EAAC,IAAG,CAAJ,EAAM,KAAI,GAAV,EAAT,EAAyB,GAAzB;AACR,oBAAI,IAAJ,CAAS,GAAT,EAAc,GAAd,MAAqB,EAArB;AACH,aAPD;AAQH,SAVD,EAUG,KAVH,CAUS,UAAU,GAAV,EAAe;AACpB,gBAAI,IAAJ,CAAS,GAAT;AACH,SAZD;AAaH,KAfD;;AAiBA,QAAI,GAAJ,CAAQ,4BAAR,EAAsC,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AAC5D,gBAAQ,GAAR,CAAY,8BAAZ,EAA4C,IAAI,MAAJ,CAAW,EAAvD;AACA,oBAAY,aAAZ,CAA0B,GAA1B,EAA+B,IAA/B,CAAoC,UAAU,OAAV,EAAmB;AACnD,gBAAI,QAAQ,QAAQ,IAAR,CAAa,QAAb,IAAuB,QAAQ,IAAR,CAAa,SAAhD;AACA,mCAAuB,MAAvB,CAA8B,aAA9B,EAA4C,EAAC,IAAG,IAAI,MAAJ,CAAW,EAAf,EAAmB,UAAS,KAA5B,EAA5C,EAAgF,UAAS,GAAT,EAAc,GAAd,EAAkB;AAC9F,oBAAG,GAAH,EAAQ,IAAI,IAAJ,CAAS,EAAC,IAAG,CAAJ,EAAM,KAAI,GAAV,EAAT,EAAyB,GAAzB;AACR,oBAAI,IAAJ,CAAS,GAAT,EAAc,GAAd,MAAqB,EAArB;AACH,aAHD;AAIH,SAND,EAMG,KANH,CAMS,UAAU,GAAV,EAAe;AACpB,gBAAI,IAAJ,CAAS,GAAT;AACH,SARD;AASH,KAXD;AAaH,CAnID","file":"productInfoController-compiled.js","sourcesContent":["var visaProductInfoService = require('../../remote/restRemote').visaProductInfoService;\r\nvar userService = require('../../service/userService');\r\n\r\nmodule.exports = function (app) {\r\n    app.post('/visa/v2/product/search', function (req, res, next) {\r\n        console.log('=========product list search : ', req.body);\r\n        visaProductInfoService.excute('queryProductByConditon',{\r\n            pageNo:req.body.pageNo||1,\r\n            pageSize:req.body.pageSize||10,\r\n            name:req.body.name||'',\r\n            visaCode:req.body.visaCode||'',\r\n            country:req.body.country||null,\r\n            state:req.body.state||null\r\n        }, function(err, crs){\r\n            if(err) res.json({rs:0,msg:err}).end();\r\n            res.send(crs).end()||'';\r\n        });\r\n    });\r\n\r\n    app.get('/visa/v2/product/detail/:id', function (req, res, next) {\r\n        console.log('=========product detail id : ', req.params.id);\r\n        visaProductInfoService.excute('queryProductById',{\r\n            id:req.params.id||0\r\n        }, function(err, crs){\r\n            if(err) res.json({rs:0,msg:err}).end();\r\n            res.send(crs).end()||'';\r\n        });\r\n    });\r\n\r\n    app.post('/visa/v2/product/add', function (req, res, next) {\r\n        console.log('=========product add body : ', req.body);\r\n        userService.queryUserInfo(req).then(function (userCrs) {\r\n            var uname = userCrs.data.trueName||userCrs.data.loginName;\r\n            req.body.creator = uname;\r\n            visaProductInfoService.excute('addProduct',req.body, function(err, crs){\r\n                if(err) res.json({rs:0,msg:err}).end();\r\n                res.send(crs).end()||'';\r\n            });\r\n        }).catch(function (crs) {\r\n            res.json(crs);\r\n        });\r\n    });\r\n\r\n    app.post('/visa/v2/product/update', function (req, res, next) {\r\n        console.log('=========product update body : ', req.body);\r\n        userService.queryUserInfo(req).then(function (userCrs) {\r\n            var uname = userCrs.data.trueName||userCrs.data.loginName;\r\n            req.body.modifier = uname;\r\n            visaProductInfoService.excute('updateProductBase',req.body, function(err, crs){\r\n                if(err) res.json({rs:0,msg:err}).end();\r\n                res.send(crs).end()||'';\r\n            });\r\n        }).catch(function (crs) {\r\n            res.json(crs);\r\n        });\r\n    });\r\n\r\n    app.get('/visa/v2/product/update-state/:id', function (req, res, next) {\r\n        console.log('=========product update state body : ', req.body);\r\n        userService.queryUserInfo(req).then(function (userCrs) {\r\n            var uname = userCrs.data.trueName||userCrs.data.loginName;\r\n            visaProductInfoService.excute('updateProductState',{id:req.params.id||0, state:req.query.state, modifier:uname}, function(err, crs){\r\n                if(err) res.json({rs:0,msg:err}).end();\r\n                res.send(crs).end()||'';\r\n            });\r\n        }).catch(function (crs) {\r\n            res.json(crs);\r\n        });\r\n    });\r\n\r\n    app.get('/visa/v2/product/del/:id', function (req, res, next) {\r\n        console.log('=========product delete id : ', req.params.id);\r\n        userService.queryUserInfo(req).then(function (userCrs) {\r\n            var uname = userCrs.data.trueName||userCrs.data.loginName;\r\n            visaProductInfoService.excute('delProduct',{\r\n                id:req.params.id||0,\r\n                modifier:uname\r\n            }, function(err, crs){\r\n                if(err) res.json({rs:0,msg:err}).end();\r\n                res.send(crs).end()||'';\r\n            });\r\n        }).catch(function (crs) {\r\n            res.json(crs);\r\n        });\r\n    });\r\n\r\n\r\n    app.get('/visa/v2/product/update-state/:id', function (req, res, next) {\r\n        console.log('=========product update state id : ', req.params.id);\r\n        userService.queryUserInfo(req).then(function (userCrs) {\r\n            var uname = userCrs.data.trueName||userCrs.data.loginName;\r\n            visaProductInfoService.excute('updateProductState',{\r\n                id:req.params.id||0,\r\n                state:req.query.state,\r\n                modifier:uname\r\n            }, function(err, crs){\r\n                if(err) res.json({rs:0,msg:err}).end();\r\n                res.send(crs).end()||'';\r\n            });\r\n        }).catch(function (crs) {\r\n            res.json(crs);\r\n        });\r\n    });\r\n\r\n    app.get('/visa/v2/product/update-channel/:id', function (req, res, next) {\r\n        console.log('=========product update sale channel id : ', req.params.id);\r\n        userService.queryUserInfo(req).then(function (userCrs) {\r\n            var uname = userCrs.data.trueName||userCrs.data.loginName;\r\n            visaProductInfoService.excute('updateProductSaleChannel',{\r\n                id:req.params.id||0,\r\n                saleChannels:req.query.saleChannels,\r\n                modifier:uname\r\n            }, function(err, crs){\r\n                if(err) res.json({rs:0,msg:err}).end();\r\n                res.send(crs).end()||'';\r\n            });\r\n        }).catch(function (crs) {\r\n            res.json(crs);\r\n        });\r\n    });\r\n\r\n    app.get('/visa/v2/product/clone/:id', function (req, res, next) {\r\n        console.log('=========product clone id : ', req.params.id);\r\n        userService.queryUserInfo(req).then(function (userCrs) {\r\n            var uname = userCrs.data.trueName||userCrs.data.loginName;\r\n            visaProductInfoService.excute('copyProduct',{id:req.params.id, operator:uname}, function(err, crs){\r\n                if(err) res.json({rs:0,msg:err}).end();\r\n                res.send(crs).end()||'';\r\n            });\r\n        }).catch(function (crs) {\r\n            res.json(crs);\r\n        });\r\n    });\r\n\r\n};"]}